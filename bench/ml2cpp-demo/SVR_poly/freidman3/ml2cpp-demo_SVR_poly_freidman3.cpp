// ******************************************************** 

// This C++ code was automatically generated by ml2cpp (development version).
// Copyright 2020

// https://github.com/antoinecarme/ml2cpp
// Model : SVR_poly
// Dataset : freidman3

// This CPP code can be compiled using any C++-17 compiler.
// g++ -Wall -Wno-unused-function -std=c++17 -g -o ml2cpp-demo_SVR_poly_freidman3.exe ml2cpp-demo_SVR_poly_freidman3.cpp

// Model deployment code

// ******************************************************** 

#include "../../Generic.i"

namespace  {

	std::vector<std::any> lProblem_data_dual = { 
	 -0.1 , 0.003829105496982019 , -0.1 , 0.1 , -0.1 , 0.1 , -0.1 , -0.1 , 0.1 , -0.1 , -0.1 , 0.1 , -0.1 , -0.1 , 0.1 , -0.1 , -0.1 , -0.1 , 0.1 , 0.1 , 0.1 , 0.1 , -0.1 , 0.1 , -0.1 , -0.1 , -0.1 , 0.0119865519981239 , -0.1 , -0.1 , 0.1 , 0.1 , -0.1 , 0.1 , -0.1 , -0.1 , 0.1 , 0.1 , -0.1 , 0.1 , 0.1 , -0.015815657495105877 , 0.1 , 0.1 , 0.1 , 0.1 , 0.1 ,};
	

	std::vector<std::vector<std::any> > lProblem_data_sv = { 
	 { 40.442330919192635, 551.0711911042478, 0.03866274947464787, 4.578076302455036 },
	 { 52.13342271064282, 897.2276900739249, 0.7446274145722073, 10.246013488604747 },
	 { 48.40695232096023, 1631.018157352114, 0.12706925899257115, 4.261898976946841 },
	 { 42.18124178567395, 1121.2433235632175, 0.7655444377588936, 7.074480997040448 },
	 { 38.24928980103384, 135.90560294712617, 0.6479362057456745, 2.179461386442667 },
	 { 42.73189343322634, 1100.678696743543, 0.9738094563683325, 2.806526760454922 },
	 { 56.48709973533751, 1282.8666984094589, 0.1679032802018684, 4.671288394126134 },
	 { 50.620296436646505, 412.32368442868733, 0.10447729455745358, 2.8853801455282126 },
	 { 9.02119007427775, 496.38824586501664, 0.4231538473843591, 8.540239837506533 },
	 { 82.50361197375535, 515.4406205692956, 0.533834716927703, 4.786980133087125 },
	 { 99.96662363577734, 209.47236840414524, 0.7902072202716324, 1.8022959941601326 },
	 { 6.292766107513681, 1199.6652317213232, 0.8040097090382655, 5.490646907281224 },
	 { 62.911872734919996, 456.23422619927044, 0.054305830277497025, 10.085281642538757 },
	 { 38.96738973035813, 1162.8273648517609, 0.013518045508856713, 6.780775777362427 },
	 { 15.860104687264842, 940.7646066666929, 0.5770564111785556, 10.338494091923241 },
	 { 61.677300727460114, 819.5815430545475, 0.19176235240070616, 8.475580701491157 },
	 { 14.354024845151192, 1727.5875493321003, 0.005807417979881824, 3.518415193774599 },
	 { 87.46073175788041, 658.8446347865661, 0.30293111693014707, 3.766979759593161 },
	 { 5.555683279187528, 1271.8773900420756, 0.26523222910347455, 2.1959763981915064 },
	 { 0.11836099216243623, 559.8947439915403, 0.995587810764828, 8.379542913119769 },
	 { 20.778030637448996, 848.8478666076559, 0.6660011390251719, 8.384615882629802 },
	 { 25.282852707475843, 524.0089478061485, 0.6487598477422791, 3.818865078416276 },
	 { 96.45390231426003, 990.2254318826166, 0.18310123438213766, 1.134096666285749 },
	 { 28.332097756867146, 946.9080883858652, 0.6508068217649317, 9.247059834072795 },
	 { 49.3998858198411, 243.93515665851513, 0.41374778042760696, 6.0193130914022674 },
	 { 91.36045636770356, 303.1369476103539, 0.5593024980266833, 3.665227001304319 },
	 { 72.53396569676332, 405.5391157928623, 0.5709666936221692, 6.973867159743634 },
	 { 45.60940687108932, 1252.3574286270157, 0.7470342432713207, 1.6312457787809178 },
	 { 78.24559083961029, 711.0171497771485, 0.21965300342994898, 9.625089118836724 },
	 { 68.93874612467783, 576.2510600295009, 0.23995122524602408, 7.786878726514889 },
	 { 27.039396289201335, 1157.3847500613917, 0.5442383550607328, 4.823471766131645 },
	 { 26.537649178083456, 1165.8316177258246, 0.5836556358077957, 2.525558223865673 },
	 { 17.868131429293165, 1485.9419331014494, 0.05359575229286839, 6.342325760231504 },
	 { 8.565026378214535, 1167.1766668648943, 0.21520853491877334, 10.52323143849918 },
	 { 76.49456162036661, 219.86925500897718, 0.7651752581595906, 6.7113407760374235 },
	 { 41.58280576983873, 435.19550661562505, 0.09995386118122851, 2.4819345970599818 },
	 { 0.14719983074734655, 264.70492824904755, 0.4977162892084863, 8.753034147728435 },
	 { 1.5021310253122144, 126.64944659397821, 0.3404027104874394, 9.813039096423058 },
	 { 16.01146852626628, 598.7469724076399, 0.058327505702267746, 10.06589099949547 },
	 { 9.573211516810986, 1051.2031635481942, 0.6197110340276971, 8.322296500143658 },
	 { 2.9026452288315685, 1087.8858946398773, 0.43123186558465754, 10.05872173627677 },
	 { 69.39239551937591, 246.84317528265575, 0.9354970990229087, 5.640783341563046 },
	 { 32.75891581529139, 576.5087879963894, 0.7903886907696169, 7.585907277097894 },
	 { 1.7602332664928388, 822.9672743702864, 0.9260703993753714, 9.748652596447922 },
	 { 34.99225156681424, 681.5157838950514, 0.6131936495952924, 10.986250457514332 },
	 { 33.85786849273585, 1044.6749302395917, 0.7503397244364791, 1.3220343397959557 },
	 { 33.901119947237255, 988.5041485863671, 0.9645023555462153, 2.81120906171767 },
	};
	

	std::vector<std::string> get_input_names(){
		std::vector<std::string> lFeatures = { "Feature_0", "Feature_1", "Feature_2", "Feature_3" };

		return lFeatures;
	}

	std::vector<std::string> get_output_names(){
		std::vector<std::string> lOutputs = { "Estimator" };

		return lOutputs;
	}

	tTable compute_regression(std::any Feature_0, std::any Feature_1, std::any Feature_2, std::any Feature_3) {
		std::vector<std::any> inputs = { Feature_0, Feature_1, Feature_2, Feature_3 };

		std::any lDotProduct = poly_kernel( lProblem_data_dual, lProblem_data_sv, inputs, 1.159796590742935e-06, 0.0, 3 ) + 1.3791321749342327;


		tTable lTable;

		std::any  lEstimator = lDotProduct;
		lTable[ "Estimator" ] = { lEstimator };

		return lTable;
	}

	tTable compute_model_outputs_from_table( tTable const & iTable) {
		tTable lTable = compute_regression(iTable.at("Feature_0")[0], iTable.at("Feature_1")[0], iTable.at("Feature_2")[0], iTable.at("Feature_3")[0]);

		return lTable;
	}

} // eof namespace 


int main() {
	score_csv_file("outputs/ml2cpp-demo/datasets/freidman3.csv");
	return 0;
}
