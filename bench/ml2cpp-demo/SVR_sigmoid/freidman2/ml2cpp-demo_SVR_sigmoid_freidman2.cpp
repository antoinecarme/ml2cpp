// ******************************************************** 

// This C++ code was automatically generated by ml2cpp (development version).
// Copyright 2020

// https://github.com/antoinecarme/ml2cpp
// Model : SVR_sigmoid
// Dataset : freidman2

// This CPP code can be compiled using any C++-17 compiler.
// g++ -Wall -Wno-unused-function -std=c++17 -g -o ml2cpp-demo_SVR_sigmoid_freidman2.exe ml2cpp-demo_SVR_sigmoid_freidman2.cpp

// Model deployment code

// ******************************************************** 

#include "../../Generic.i"

namespace  {

	std::vector<std::any> lProblem_data_dual = { 
	 0.1 , 0.1 , -0.1 , 0.1 , 0.1 , 0.1 , -0.1 , 0.1 , -0.1 , 0.1 , 0.1 , -0.1 , -0.1 , -0.1 , -0.1 , -0.1 , 0.1 , -0.1 , -0.1 , 0.1 , -0.1 , -0.1 , 0.1 , -0.1 , -0.1 , -0.1 , 0.1 , 0.1 , 0.1 , 0.1 , 0.1 , 0.1 , -0.1 , -0.1 , -0.1 , 0.1 , 0.1 , 0.1 , -0.1 , 0.1 , -0.1 , -0.1 , -0.1 , -0.1 , -0.1 , 0.1 , -0.1 , 0.1 , 0.1 , -0.1 , -0.1 , -0.1 , 0.1 , 0.1 , 0.1 , -0.1 , -0.1 , -0.1 , 0.1 , -0.1 , -0.1 , -0.1 , -0.1 , 0.1 , -0.1 , 0.1 , 0.1 , 0.1 , 0.1 , -0.1 , 0.1 , -0.1 , 0.1 , 0.1 , -0.1 , 0.1 , 0.1 , 0.1 , 0.1 , -0.1 ,};
	

	std::vector<std::vector<std::any> > lProblem_data_sv = { 
	 { 54.38834102865398, 1647.6623950430826, 0.5671724252803599, 3.09911625029609 },
	 { 20.562836726629964, 1667.9257595716754, 0.4895624792598544, 7.371731407367831 },
	 { 40.442330919192635, 551.0711911042478, 0.03866274947464787, 4.578076302455036 },
	 { 52.13342271064282, 897.2276900739249, 0.7446274145722073, 10.246013488604747 },
	 { 48.69438373960177, 1664.2552781105514, 0.31144836807627496, 4.632624341589297 },
	 { 62.41256103982974, 1030.794250465373, 0.7128122573277177, 10.40492055481995 },
	 { 48.40695232096023, 1631.018157352114, 0.12706925899257115, 4.261898976946841 },
	 { 42.18124178567395, 1121.2433235632175, 0.7655444377588936, 7.074480997040448 },
	 { 38.24928980103384, 135.90560294712617, 0.6479362057456745, 2.179461386442667 },
	 { 44.88554870850716, 1627.38160654522, 0.8255815423347828, 10.063448888684775 },
	 { 42.73189343322634, 1100.678696743543, 0.9738094563683325, 2.806526760454922 },
	 { 56.48709973533751, 1282.8666984094589, 0.1679032802018684, 4.671288394126134 },
	 { 50.620296436646505, 412.32368442868733, 0.10447729455745358, 2.8853801455282126 },
	 { 9.02119007427775, 496.38824586501664, 0.4231538473843591, 8.540239837506533 },
	 { 82.50361197375535, 515.4406205692956, 0.533834716927703, 4.786980133087125 },
	 { 99.96662363577734, 209.47236840414524, 0.7902072202716324, 1.8022959941601326 },
	 { 6.292766107513681, 1199.6652317213232, 0.8040097090382655, 5.490646907281224 },
	 { 62.911872734919996, 456.23422619927044, 0.054305830277497025, 10.085281642538757 },
	 { 38.96738973035813, 1162.8273648517609, 0.013518045508856713, 6.780775777362427 },
	 { 15.860104687264842, 940.7646066666929, 0.5770564111785556, 10.338494091923241 },
	 { 61.677300727460114, 819.5815430545475, 0.19176235240070616, 8.475580701491157 },
	 { 14.354024845151192, 1727.5875493321003, 0.005807417979881824, 3.518415193774599 },
	 { 61.3987885486019, 808.6138063164558, 0.709949209237898, 9.792557252319531 },
	 { 87.46073175788041, 658.8446347865661, 0.30293111693014707, 3.766979759593161 },
	 { 5.555683279187528, 1271.8773900420756, 0.26523222910347455, 2.1959763981915064 },
	 { 40.27856713793895, 366.2162846523089, 0.9966853241577984, 1.656986931673732 },
	 { 0.11836099216243623, 559.8947439915403, 0.995587810764828, 8.379542913119769 },
	 { 72.43698164486757, 1121.8678694429432, 0.9484486314429021, 6.427528686781514 },
	 { 60.58860696643238, 1469.843035787915, 0.6089512168171621, 2.3367948536223095 },
	 { 20.778030637448996, 848.8478666076559, 0.6660011390251719, 8.384615882629802 },
	 { 9.844209111159174, 1641.9469469028431, 0.7075346096235595, 5.986957496499917 },
	 { 35.204122625647635, 1709.6137391765267, 0.5384102305994837, 3.8037750547337037 },
	 { 69.12110117232672, 1206.1440502200699, 0.2510397707351385, 5.048716496806546 },
	 { 25.282852707475843, 524.0089478061485, 0.6487598477422791, 3.818865078416276 },
	 { 96.45390231426003, 990.2254318826166, 0.18310123438213766, 1.134096666285749 },
	 { 28.332097756867146, 946.9080883858652, 0.6508068217649317, 9.247059834072795 },
	 { 69.85214811522404, 1639.1260281796144, 0.4296756544509407, 7.464140755060015 },
	 { 39.22420371373826, 1480.0362298674247, 0.979651504500836, 10.93827839877219 },
	 { 56.413773572677925, 355.67891387520524, 0.8414818043413281, 9.840426401160759 },
	 { 59.840712417889094, 1182.939023927105, 0.5861796897198648, 2.600964238988918 },
	 { 49.3998858198411, 243.93515665851513, 0.41374778042760696, 6.0193130914022674 },
	 { 15.326716261726414, 180.5390310694927, 0.7104185591645422, 9.612317521518237 },
	 { 75.72356153727631, 979.5390758373206, 0.3441595308948491, 6.689958461053408 },
	 { 91.36045636770356, 303.1369476103539, 0.5593024980266833, 3.665227001304319 },
	 { 72.53396569676332, 405.5391157928623, 0.5709666936221692, 6.973867159743634 },
	 { 45.60940687108932, 1252.3574286270157, 0.7470342432713207, 1.6312457787809178 },
	 { 30.690852469086604, 1259.3392856726232, 0.2617327305845589, 5.8668782737639535 },
	 { 78.70377755058512, 884.3045807091647, 0.8550598892720919, 8.805754588947428 },
	 { 28.195299489394664, 1658.7104507269821, 0.6353041988507154, 8.577711433319472 },
	 { 78.24559083961029, 711.0171497771485, 0.21965300342994898, 9.625089118836724 },
	 { 11.920432983287899, 1644.054573840725, 0.044505714773144245, 1.9788585131261551 },
	 { 68.93874612467783, 576.2510600295009, 0.23995122524602408, 7.786878726514889 },
	 { 27.039396289201335, 1157.3847500613917, 0.5442383550607328, 4.823471766131645 },
	 { 43.578536957972446, 1663.9708446048005, 0.41510811578335083, 3.0852135693019114 },
	 { 26.537649178083456, 1165.8316177258246, 0.5836556358077957, 2.525558223865673 },
	 { 43.096081790346766, 932.7963927717359, 0.31503359221256, 6.637296650735946 },
	 { 17.868131429293165, 1485.9419331014494, 0.05359575229286839, 6.342325760231504 },
	 { 8.565026378214535, 1167.1766668648943, 0.21520853491877334, 10.52323143849918 },
	 { 51.65052020909686, 880.62728820991, 0.5666035361130893, 9.5100026719075 },
	 { 76.49456162036661, 219.86925500897718, 0.7651752581595906, 6.7113407760374235 },
	 { 41.58280576983873, 435.19550661562505, 0.09995386118122851, 2.4819345970599818 },
	 { 0.14719983074734655, 264.70492824904755, 0.4977162892084863, 8.753034147728435 },
	 { 1.5021310253122144, 126.64944659397821, 0.3404027104874394, 9.813039096423058 },
	 { 69.58353961616501, 945.3817982620021, 0.7937187998169644, 10.678700273094229 },
	 { 16.01146852626628, 598.7469724076399, 0.058327505702267746, 10.06589099949547 },
	 { 9.573211516810986, 1051.2031635481942, 0.6197110340276971, 8.322296500143658 },
	 { 49.065466008392974, 1317.9965671708464, 0.7514738660771196, 2.3145116809009814 },
	 { 2.9026452288315685, 1087.8858946398773, 0.43123186558465754, 10.05872173627677 },
	 { 89.79240360827384, 1393.0059875788913, 0.8484215372640762, 9.34953230770002 },
	 { 69.39239551937591, 246.84317528265575, 0.9354970990229087, 5.640783341563046 },
	 { 78.03364203742906, 1032.4792951117327, 0.9723393786954382, 1.2304422399648032 },
	 { 48.144031373730044, 761.0600872268959, 0.307483000073309, 1.151070185174692 },
	 { 32.75891581529139, 576.5087879963894, 0.7903886907696169, 7.585907277097894 },
	 { 1.7602332664928388, 822.9672743702864, 0.9260703993753714, 9.748652596447922 },
	 { 19.75869393049412, 272.21600506246267, 0.44963351204713553, 1.8639297884180575 },
	 { 79.10109600325073, 1315.2821922174621, 0.9863618489333056, 5.911474588008384 },
	 { 34.99225156681424, 681.5157838950514, 0.6131936495952924, 10.986250457514332 },
	 { 33.85786849273585, 1044.6749302395917, 0.7503397244364791, 1.3220343397959557 },
	 { 33.901119947237255, 988.5041485863671, 0.9645023555462153, 2.81120906171767 },
	 { 18.02682544461097, 861.2889920462572, 0.10216025778626836, 6.7984751522819336 },
	};
	

	std::vector<std::string> get_input_names(){
		std::vector<std::string> lFeatures = { "Feature_0", "Feature_1", "Feature_2", "Feature_3" };

		return lFeatures;
	}

	std::vector<std::string> get_output_names(){
		std::vector<std::string> lOutputs = { "Estimator" };

		return lOutputs;
	}

	tTable compute_regression(std::any Feature_0, std::any Feature_1, std::any Feature_2, std::any Feature_3) {
		std::vector<std::any> inputs = { Feature_0, Feature_1, Feature_2, Feature_3 };

		std::any lDotProduct = sigmoid_kernel( lProblem_data_dual, lProblem_data_sv, inputs, 1.159796590742935e-06,0.0 ) + 392.45082406402025;


		tTable lTable;

		std::any  lEstimator = lDotProduct;
		lTable[ "Estimator" ] = { lEstimator };

		return lTable;
	}

	tTable compute_model_outputs_from_table( tTable const & iTable) {
		tTable lTable = compute_regression(iTable.at("Feature_0")[0], iTable.at("Feature_1")[0], iTable.at("Feature_2")[0], iTable.at("Feature_3")[0]);

		return lTable;
	}

} // eof namespace 


int main() {
	score_csv_file("outputs/ml2cpp-demo/datasets/freidman2.csv");
	return 0;
}
